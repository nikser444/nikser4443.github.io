/* =================================
   КОМПОНЕНТЫ КНОПОК
   ================================= */

/* Базовые стили кнопок */
.btn {
  @apply inline-flex items-center justify-center rounded-md font-medium transition-all duration-200;
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
  border: none;
  cursor: pointer;
}

/* Размеры кнопок */
.btn-sm {
  @apply px-3 py-1.5 text-sm;
  height: 32px;
  font-size: 13px;
}

.btn-md {
  @apply px-4 py-2 text-sm;
  height: 40px;
}

.btn-lg {
  @apply px-6 py-3 text-base;
  height: 48px;
}

/* Варианты кнопок */
.btn-primary {
  background-color: var(--color-primary);
  color: var(--color-text-inverse);
}

.btn-primary:hover:not(:disabled) {
  background-color: var(--color-primary-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.btn-secondary {
  background-color: var(--color-surface);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
}

.btn-secondary:hover:not(:disabled) {
  background-color: var(--color-surface-hover);
  border-color: var(--color-primary);
}

.btn-ghost {
  background-color: transparent;
  color: var(--color-text-secondary);
}

.btn-ghost:hover:not(:disabled) {
  background-color: var(--color-surface-hover);
  color: var(--color-text-primary);
}

.btn-success {
  background-color: var(--color-success);
  color: white;
}

.btn-success:hover:not(:disabled) {
  background-color: #059669;
}

.btn-error {
  background-color: var(--color-error);
  color: white;
}

.btn-error:hover:not(:disabled) {
  background-color: #dc2626;
}

/* Кнопка с иконкой */
.btn-icon {
  @apply w-10 h-10 p-0 rounded-full flex items-center justify-center;
}

/* =================================
   КОМПОНЕНТЫ ФОРМ
   ================================= */

/* Базовые стили полей ввода */
.input {
  @apply w-full px-3 py-2 rounded-md border transition-all duration-200;
  @apply focus:outline-none focus:ring-2 focus:ring-offset-1;
  background-color: var(--color-surface);
  border-color: var(--color-border);
  color: var(--color-text-primary);
}

.input:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.input:disabled {
  @apply opacity-50 cursor-not-allowed;
  background-color: var(--color-background-secondary);
}

.input-error {
  border-color: var(--color-error);
}

.input-error:focus {
  border-color: var(--color-error);
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
}

/* Textarea */
.textarea {
  @apply input resize-none min-h-[80px];
  font-family: inherit;
}

/* Группа полей */
.input-group {
  @apply relative;
}

.input-with-icon {
  @apply pl-10;
}

.input-icon {
  @apply absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400;
  pointer-events: none;
}

/* Лейблы */
.label {
  @apply block text-sm font-medium mb-1;
  color: var(--color-text-secondary);
}

.label-required::after {
  content: '*';
  color: var(--color-error);
  margin-left: 2px;
}

/* Сообщения об ошибках */
.error-message {
  @apply text-sm mt-1;
  color: var(--color-error);
}

/* =================================
   МОДАЛЬНЫЕ ОКНА
   ================================= */

.modal-backdrop {
  @apply fixed inset-0 flex items-center justify-center p-4;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(2px);
  z-index: var(--z-modal-backdrop);
  animation: fadeIn 0.2s ease-out;
}

.modal-content {
  @apply relative w-full max-w-lg max-h-full overflow-auto rounded-lg shadow-xl;
  background-color: var(--color-surface);
  animation: scaleIn 0.2s ease-out;
}

.modal-header {
  @apply flex items-center justify-between p-6 border-b;
  border-color: var(--color-border);
}

.modal-title {
  @apply text-lg font-semibold;
  color: var(--color-text-primary);
}

.modal-close {
  @apply p-1 rounded-full hover:bg-gray-100 transition-colors;
}

.modal-body {
  @apply p-6;
}

.modal-footer {
  @apply flex justify-end gap-3 p-6 border-t;
  border-color: var(--color-border);
}

/* =================================
   КАРТОЧКИ
   ================================= */

.card {
  @apply rounded-lg border p-4;
  background-color: var(--color-surface);
  border-color: var(--color-border);
  box-shadow: var(--shadow-sm);
}

.card-hover {
  @apply transition-all duration-200 hover:shadow-md cursor-pointer;
}

.card-header {
  @apply mb-4 pb-3 border-b;
  border-color: var(--color-border);
}

.card-title {
  @apply text-lg font-semibold;
  color: var(--color-text-primary);
}

.card-subtitle {
  @apply text-sm;
  color: var(--color-text-secondary);
}

.card-content {
  @apply space-y-3;
}

.card-footer {
  @apply mt-4 pt-3 border-t;
  border-color: var(--color-border);
}

/* =================================
   АВАТАРЫ
   ================================= */

.avatar {
  @apply relative inline-flex items-center justify-center rounded-full overflow-hidden;
  background-color: var(--color-primary-light);
  color: var(--color-primary);
  font-weight: 600;
}

.avatar-sm {
  @apply w-8 h-8 text-sm;
}

.avatar-md {
  @apply w-12 h-12 text-base;
}

.avatar-lg {
  @apply w-16 h-16 text-lg;
}

.avatar-xl {
  @apply w-24 h-24 text-2xl;
}

.avatar img {
  @apply w-full h-full object-cover;
}

.avatar-online {
  position: relative;
}

.avatar-online::after {
  content: '';
  @apply absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full;
}

/* =================================
   БЕЙДЖИ И МЕТКИ
   ================================= */

.badge {
  @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium;
}

.badge-primary {
  background-color: var(--color-primary-light);
  color: var(--color-primary);
}

.badge-success {
  @apply bg-green-100 text-green-800;
}

.badge-warning {
  @apply bg-yellow-100 text-yellow-800;
}

.badge-error {
  @apply bg-red-100 text-red-800;
}

.badge-secondary {
  background-color: var(--color-background-secondary);
  color: var(--color-text-secondary);
}

/* Счетчик уведомлений */
.notification-badge {
  @apply absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center;
  min-width: 20px;
}

/* =================================
   СПИСКИ
   ================================= */

.list {
  @apply divide-y;
  divide-color: var(--color-border);
}

.list-item {
  @apply flex items-center p-3 hover:bg-gray-50 transition-colors cursor-pointer;
}

.list-item:hover {
  background-color: var(--color-surface-hover);
}

.list-item-content {
  @apply flex-1 min-w-0;
}

.list-item-title {
  @apply font-medium text-sm;
  color: var(--color-text-primary);
}

.list-item-subtitle {
  @apply text-sm mt-1;
  color: var(--color-text-secondary);
}

.list-item-meta {
  @apply text-xs;
  color: var(--color-text-tertiary);
}

/* =================================
   НАВИГАЦИЯ
   ================================= */

.nav {
  @apply flex flex-col space-y-1;
}

.nav-item {
  @apply flex items-center px-3 py-2 rounded-md transition-colors;
  color: var(--color-text-secondary);
}

.nav-item:hover {
  background-color: var(--color-surface-hover);
  color: var(--color-text-primary);
}

.nav-item.active {
  background-color: var(--color-primary-light);
  color: var(--color-primary);
}

.nav-icon {
  @apply w-5 h-5 mr-3 flex-shrink-0;
}

/* =================================
   ДРОПДАУНЫ
   ================================= */

.dropdown {
  @apply relative;
}

.dropdown-menu {
  @apply absolute right-0 mt-2 w-56 rounded-md shadow-lg border z-50;
  background-color: var(--color-surface);
  border-color: var(--color-border);
  animation: slideInDown 0.15s ease-out;
}

.dropdown-item {
  @apply flex items-center px-4 py-2 text-sm hover:bg-gray-50 transition-colors cursor-pointer;
  color: var(--color-text-primary);
}

.dropdown-item:hover {
  background-color: var(--color-surface-hover);
}

.dropdown-item:first-child {
  @apply rounded-t-md;
}

.dropdown-item:last-child {
  @apply rounded-b-md;
}

.dropdown-divider {
  @apply border-t my-1;
  border-color: var(--color-border);
}

/* =================================
   ТОСТЕРЫ / УВЕДОМЛЕНИЯ
   ================================= */

.toast-container {
  @apply fixed top-4 right-4 z-50 space-y-2;
}

.toast {
  @apply flex items-center p-4 rounded-md shadow-lg border max-w-md;
  background-color: var(--color-surface);
  border-color: var(--color-border);
  animation: slideInRight 0.3s ease-out;
}

.toast-success {
  @apply border-l-4 border-green-500;
}

.toast-error {
  @apply border-l-4 border-red-500;
}

.toast-warning {
  @apply border-l-4 border-yellow-500;
}

.toast-info {
  @apply border-l-4 border-blue-500;
}

.toast-icon {
  @apply w-5 h-5 mr-3 flex-shrink-0;
}

.toast-content {
  @apply flex-1 min-w-0;
}

.toast-title {
  @apply font-medium text-sm;
  color: var(--color-text-primary);
}

.toast-message {
  @apply text-sm mt-1;
  color: var(--color-text-secondary);
}

.toast-close {
  @apply ml-3 p-1 hover:bg-gray-100 rounded transition-colors;
}

/* =================================
   ИНДИКАТОРЫ ЗАГРУЗКИ
   ================================= */

.spinner {
  @apply w-6 h-6 border-2 border-gray-200 border-t-blue-600 rounded-full animate-spin;
}

.spinner-sm {
  @apply w-4 h-4;
}

.spinner-lg {
  @apply w-8 h-8;
}

.loading-skeleton {
  @apply bg-gray-200 rounded animate-pulse;
}

[data-theme="dark"] .loading-skeleton {
  @apply bg-gray-700;
}

/* =================================
   ЧЕКБОКСЫ И РАДИО КНОПКИ
   ================================= */

.checkbox {
  @apply relative cursor-pointer;
}

.checkbox input {
  @apply sr-only;
}

.checkbox-indicator {
  @apply w-4 h-4 border border-gray-300 rounded bg-white transition-all duration-200;
}

.checkbox input:checked + .checkbox-indicator {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
}

.checkbox input:checked + .checkbox-indicator::after {
  content: '';
  @apply absolute top-0.5 left-1 w-2 h-1 border-2 border-white border-t-0 border-r-0 transform rotate-[-45deg];
}

/* =================================
   ПЕРЕКЛЮЧАТЕЛИ
   ================================= */

.toggle {
  @apply relative cursor-pointer;
}

.toggle input {
  @apply sr-only;
}

.toggle-slider {
  @apply w-12 h-6 bg-gray-200 rounded-full transition-colors duration-200;
  position: relative;
}

.toggle-slider::before {
  content: '';
  @apply absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform duration-200;
}

.toggle input:checked + .toggle-slider {
  background-color: var(--color-primary);
}

.toggle input:checked + .toggle-slider::before {
  transform: translateX(24px);
}

/* =================================
   ПРОГРЕСС БАРЫ
   ================================= */

.progress {
  @apply w-full bg-gray-200 rounded-full h-2 overflow-hidden;
}

.progress-bar {
  @apply h-full bg-blue-600 rounded-full transition-all duration-300;
  background-color: var(--color-primary);
}

/* =================================
   ТАБЫ
   ================================= */

.tabs {
  @apply flex border-b;
  border-color: var(--color-border);
}

.tab {
  @apply px-4 py-2 font-medium text-sm transition-colors cursor-pointer;
  color: var(--color-text-secondary);
  border-bottom: 2px solid transparent;
}

.tab:hover {
  color: var(--color-text-primary);
}

.tab.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

.tab-content {
  @apply mt-4;
}

/* =================================
   РАЗДЕЛИТЕЛИ
   ================================= */

.divider {
  @apply border-t;
  border-color: var(--color-divider);
}

.divider-vertical {
  @apply border-l h-full;
  border-color: var(--color-divider);
}

/* =================================
   УТИЛИТЫ ДЛЯ ПОЗИЦИОНИРОВАНИЯ
   ================================= */

.sticky-top {
  @apply sticky top-0;
  z-index: var(--z-sticky);
}

.fixed-bottom-right {
  @apply fixed bottom-4 right-4;
  z-index: var(--z-fixed);
}